<h1><%= @kindergarten.name %>幼稚園</h1>
<!-- タブのヘッダーコード(始) -->
<ul class="nav nav-tabs">
  <li class="nav-item"><a href="#ContentA" class="nav-link active" data-toggle="tab">認可情報</a></li>
  <li class="nav-item"><a href="#ContentB" class="nav-link" data-toggle="tab">担当者メモ</a></li>
  <li class="nav-item"><a href="#ContentC" class="nav-link" data-toggle="tab">アクセス</a></li>
  <li class="nav-item"><a href="#ContentD" class="nav-link" data-toggle="tab">外観写真</a></li>
</ul>
<!-- タブのヘッダーコード(終) -->

<!--------  タブのコンテンツコード(始) -------->
<div class="tab-content">
<!--------  show画面(認可情報)のコード 始まり -------->
  <div class="tab-pane active" id="ContentA">
    <h2>認可情報画面</h2>
    <table>
      <tr>
        <th>園長</th>
        <td><%= @kindergarten.authorization.principal %></td>
      </tr>
      <tr>
        <th>設置認可日</th>
        <td><%= @kindergarten.authorization.installation_date %></td>
      </tr>
      <tr>
        <th>学級数</th>
        <td><%= @kindergarten.authorization.number_of_classes %>学級</td>
      </tr>
      <tr>
        <th>定員</th>
        <td><%= @kindergarten.authorization.capacity %>人</td>
      </tr>
      <tr>
        <th>園児数</th>
        <td><%= @kindergarten.authorization.number_of_students %>人</td>
      </tr>
      <tr>
        <th>園地面積</th>
        <td><%= @kindergarten.authorization.school_area.to_s(:delimited) %>㎡</td>
      </tr>
      <tr>
        <th>園舎延床面積</th>
        <td><%= @kindergarten.authorization.school_floor_area.to_s(:delimited) %>㎡</td>
      </tr>
    </table>
  </div>
<!-- ------  show画面(認可情報)のコード 終わり ------ -->

<!-- ------  show画面(担当者メモ)のコード 始まり ------ -->
  <div class="tab-pane" id="ContentB">
    <h2>担当者メモ画面</h2>
    <div id="app">
      <contents></contents>
    </div>
  </div>
  <%= javascript_pack_tag "todo" %>
<!-- ------  show画面(担当者メモ)のコード 終わり ------ -->

<!-- ------  show画面(アクセス)のコード 始まり ------ -->
  <div class="tab-pane" id="ContentC">
    <h2>アクセス画面</h2>
    <script type="text/javascript">
      function initMap() {
        var test ={lat: <%= @kindergarten.latitude %>, lng: <%= @kindergarten.longitude %>};
        var map = new google.maps.Map(document.getElementById('map'), {
                  zoom: 15,
                  center: test
                  });
        var transitLayer = new google.maps.TransitLayer();
        transitLayer.setMap(map);
        var contentString = '住所：<%= @kindergarten.address %>';
        var infowindow = new google.maps.InfoWindow({
          content: contentString
        });

     // #Map上の指定した位置にピンを挿して表示する
        var marker = new google.maps.Marker({
                      position:test,
                      map: map,
                      title: contentString
                     });

         marker.addListener('click', function() {
           infowindow.open(map, marker);
         });
      }
    </script>
    <script async defer
                  src="https://maps.googleapis.com/maps/api/js?v=3.exp&key=AIzaSyDiFNHHbrZedm3v5I-4eY20PgG9Bn8BEE8&callback=initMap">
    </script>
    <style type="text/css">
      #map { height: 500px;
             width: 50%;}
    </style>

    <div id="map"></div>
    <% @kindergarten.stations.each do |station| %>
      <table>
        <tr>
          <td><%= station.route %>線</td>
          <td><%= station.station_name %>駅</td>
          <td>徒歩<%= station.walk_time %>分</td>
        </tr>
      </table>
    <% end %>
  </div>
<!-- ------  show画面(アクセス)のコード 終わり ------ -->

<!-- ------  show画面(外観写真)のコード 始まり ------ -->
  <div class="tab-pane" id="ContentD">
    <h2>外観写真画面</h2>
    <table>
      <tr>
        <th>園地</th>
        <th>園舎</th>
      </tr>
      <tr>
        <td><%= image_tag @kindergarten.image.url %></td>
        <td><%= image_tag @kindergarten.cover_image.url %></td>
      </tr>
    </table>
  </div>
<!-- ------  show画面(外観写真)のコード 終わり ------ -->
</div>
<!--------  タブのコンテンツコード(始) -------->

<%= link_to '幼稚園一覧', kindergartens_path %>
